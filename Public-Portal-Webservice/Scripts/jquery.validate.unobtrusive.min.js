/*!
** Unobtrusive validation support library for jQuery and jQuery Validate
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(f){var k=f.validator,l,c="unobtrusiveValidation";function j(m,o,n){m.rules[o]=n;if(m.message){m.messages[o]=m.message}}function d(m){return m.replace(/^\s+|\s+$/g,"").split(/\s*,\s*/g)}function e(m){return m.substr(0,m.lastIndexOf(".")+1)}function b(n,m){if(n.indexOf("*.")===0){n=n.replace("*.",m)}return n}function g(n,p){var m=f(this).find("[data-valmsg-for='"+p[0].name+"']"),o=f.parseJSON(m.attr("data-valmsg-replace"))!==false;m.removeClass("field-validation-valid").addClass("field-validation-error");n.data("unobtrusiveContainer",m);if(o){m.empty();n.removeClass("input-validation-error").appendTo(m)}else{n.hide()}}function i(o,n){var m=f(this).find("[data-valmsg-summary=true]"),p=m.find("ul");if(p&&p.length&&n.errorList.length){p.empty();m.addClass("validation-summary-errors").removeClass("validation-summary-valid");f.each(n.errorList,function(){f("<li />").html(this.message).appendTo(p)})}}function h(n){var m=n.data("unobtrusiveContainer"),o=f.parseJSON(m.attr("data-valmsg-replace"));if(m){m.addClass("field-validation-valid").removeClass("field-validation-error");n.removeData("unobtrusiveContainer");if(o){m.empty()}}}function a(o){var n=f(o),m=n.data(c);if(!m){m={options:{errorClass:"input-validation-error",errorElement:"span",errorPlacement:f.proxy(g,o),invalidHandler:f.proxy(i,o),messages:{},rules:{},success:f.proxy(h,o)},attachValidation:function(){n.validate(this.options)},validate:function(){n.validate();return n.valid()}};n.data(c,m)}return m}k.unobtrusive={adapters:[],parseElement:function(p,m){var o=f(p),r=o.parents("form")[0],n,s,q;if(!r){return}n=a(r);n.options.rules[p.name]=s={};n.options.messages[p.name]=q={};f.each(this.adapters,function(){var u="data-val-"+this.name,t=o.attr(u),v={};if(t!==undefined){u+="-";f.each(this.params,function(){v[this]=o.attr(u+this)});this.adapt({element:p,form:r,message:t,params:v,rules:s,messages:q})}});jQuery.extend(s,{__dummy__:true});if(!m){n.attachValidation()}},parse:function(m){f(m).find(":input[data-val=true]").each(function(){k.unobtrusive.parseElement(this,true)});f("form").each(function(){var n=a(this);if(n){n.attachValidation()}})}};l=k.unobtrusive.adapters;l.add=function(o,n,m){if(!m){m=n;n=[]}this.push({name:o,params:n,adapt:m});return this};l.addBool=function(n,m){return this.add(n,function(o){j(o,m||n,true)})};l.addMinMax=function(r,q,o,n,m,p){return this.add(r,[m||"min",p||"max"],function(t){var u=t.params.min,s=t.params.max;if(u&&s){j(t,n,[u,s])}else{if(u){j(t,q,u)}else{if(s){j(t,o,s)}}}})};l.addSingleVal=function(o,m,n){return this.add(o,[m||"val"],function(p){j(p,n||o,p.params[m])})};k.addMethod("__dummy__",function(n,m,o){return true});k.addMethod("regex",function(o,n,p){var m;if(this.optional(n)){return true}m=new RegExp(p).exec(o);return(m&&(m.index===0)&&(m[0].length===o.length))});l.addSingleVal("accept","exts").addSingleVal("regex","pattern");l.addBool("creditcard").addBool("date").addBool("digits").addBool("email").addBool("number").addBool("url");l.addMinMax("length","minlength","maxlength","rangelength").addMinMax("range","min","max","range");l.add("equalto",["other"],function(n){var p=e(n.element.name),m=n.params.other,q=b(m,p),o=f(n.form).find(":input[name="+q.replace(".","\\.")+"]")[0];j(n,"equalTo",o)});l.add("required",function(m){if(m.element.tagName.toUpperCase()!=="INPUT"||m.element.type.toUpperCase()!=="CHECKBOX"){j(m,"required",true)}});l.add("remote",["url","type","additionalfields"],function(m){var o={url:m.params.url,type:m.params.type||"GET",data:{}},n=e(m.element.name);f.each(d(m.params.additionalfields||m.element.name),function(p,r){var q=b(r,n);o.data[q]=function(){return f(m.form).find(":input[name='"+q+"']").val()}});j(m,"remote",o)});f(function(){k.unobtrusive.parse(document)})}(jQuery));